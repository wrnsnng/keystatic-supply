{"version":3,"file":"urql-exchange-persisted.js","sources":["../src/sha256.ts","../src/persistedExchange.ts"],"sourcesContent":null,"names":["webCrypto","window","crypto","self","nodeCrypto","getNodeCrypto","Function","require","_error","hash","query","subtle","digest","name","TextEncoder","encode","Uint8Array","reduce","prev","byte","toString","padStart","createHash","update","process","env","NODE_ENV","console","warn","isPersistedMiss","error","graphQLErrors","some","x","message","isPersistedUnsupported","persistedExchange","options","forward","preferGetForPersistedQueries","enforcePersistedQueries","hashFn","generateHash","enableForMutation","enableForSubscriptions","supportsPersistedQueries","operationFilter","operation","context","persistAttempt","kind","getPersistedOperation","persistedOperation","makeOperation","sha256Hash","stringifyDocument","extensions","persistedQuery","version","preferGetMethod","operations$","retries","makeSubject","forwardedOps$","filter","persistedOps$","mergeMap","persistedOperation$","takeUntil","op","key","fromPromise","result","map","followupOperation","next","miss","merge","source"],"mappings":";;;;;AAAA,IAAMA,SAAS,GACb,OAAOC,MAAM,KAAK,WAAW,GACzBA,MAAM,CAACC,MAAM,GACb,OAAOC,IAAI,KAAK,WAAW,GACzBA,IAAI,CAACD,MAAM,GACX,IAC4B,CAAA;AAEpC,IAAIE,UAA0D,CAAA;AAE9D,IAAMC,aAAa,GAAG,YAAqD;EACzE,IAAI,CAACD,UAAU,EAAE;AACf;AACA;IACA,IAAI;MACFA,UAAU,GAAG,IAAIE,QAAQ,CAAC,SAAS,EAAE,0BAA0B,CAAC,CAACC,OAAO,CAAC,CAAA;KAC1E,CAAC,OAAOC,MAAM,EAAE;MACf,IAAI;AACFJ,QAAAA,UAAU,GAAG,IAAIE,QAAQ,CAAC,yBAAyB,CAAC,EAAE,CAAA;AACxD,OAAC,CAAC,OAAOE,MAAM,EAAE,EAAC;AACpB,KAAA;AACF,GAAA;AACA,EAAA,OAAOJ,UAAU,CAAA;AACnB,CAAC,CAAA;AAEM,IAAMK,IAAI,GAAG,MAAOC,KAAa,IAAsB;AAC5D,EAAA,IAAIV,SAAS,IAAIA,SAAS,CAACW,MAAM,EAAE;IACjC,IAAMC,MAAM,GAAG,MAAMZ,SAAS,CAACW,MAAM,CAACC,MAAM,CAC1C;AAAEC,MAAAA,IAAI,EAAE,SAAA;KAAW,EACnB,IAAIC,WAAW,EAAE,CAACC,MAAM,CAACL,KAAK,CAChC,CAAC,CAAA;AACD,IAAA,OAAO,IAAIM,UAAU,CAACJ,MAAM,CAAC,CAACK,MAAM,CAClC,CAACC,IAAI,EAAEC,IAAI,KAAKD,IAAI,GAAGC,IAAI,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EACzD,EACF,CAAC,CAAA;AACH,GAAC,MAAM,IAAI,MAAMhB,aAAa,EAAE,EAAE;AAChC;AACA,IAAA,OAAO,CAAC,MAAMD,UAAU,EAAGkB,UAAU,CAAC,QAAQ,CAAC,CAACC,MAAM,CAACb,KAAK,CAAC,CAACE,MAAM,CAAC,KAAK,CAAC,CAAA;AAC7E,GAAA;AAEA,EAAA,IAAIY,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;AACzCC,IAAAA,OAAO,CAACC,IAAI,CACV,4FAA4F,GAC1F,yEACJ,CAAC,CAAA;AACH,GAAA;AAEA,EAAA,OAAO,EAAE,CAAA;AACX,CAAC;;ACxBD,IAAMC,eAAe,GAAIC,KAAoB,IAC3CA,KAAK,CAACC,aAAa,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,OAAO,KAAK,wBAAwB,CAAC,CAAA;AAEvE,IAAMC,sBAAsB,GAAIL,KAAoB,IAClDA,KAAK,CAACC,aAAa,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,OAAO,KAAK,4BAA4B,CAAC,CAAA;;AAE3E;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACaE,IAAAA,iBAAiB,GAC3BC,OAAkC,IACnC,CAAC;AAAEC,EAAAA,OAAAA;AAAQ,CAAC,KAAK;AACf,EAAA,IAAI,CAACD,OAAO,EAAEA,OAAO,GAAG,EAAE,CAAA;AAE1B,EAAA,IAAME,4BAA4B,GAAGF,OAAO,CAACE,4BAA4B,CAAA;AACzE,EAAA,IAAMC,uBAAuB,GAAG,CAAC,CAACH,OAAO,CAACG,uBAAuB,CAAA;AACjE,EAAA,IAAMC,MAAM,GAAGJ,OAAO,CAACK,YAAY,IAAIjC,IAAI,CAAA;AAC3C,EAAA,IAAMkC,iBAAiB,GAAG,CAAC,CAACN,OAAO,CAACM,iBAAiB,CAAA;AACrD,EAAA,IAAMC,sBAAsB,GAAG,CAAC,CAACP,OAAO,CAACO,sBAAsB,CAAA;EAC/D,IAAIC,wBAAwB,GAAG,IAAI,CAAA;AAEnC,EAAA,IAAMC,eAAe,GAAIC,SAAoB,IAC3CF,wBAAwB,IACxB,CAACE,SAAS,CAACC,OAAO,CAACC,cAAc,KAC/BN,iBAAiB,IAAII,SAAS,CAACG,IAAI,KAAK,UAAU,IACjDN,sBAAsB,IAAIG,SAAS,CAACG,IAAI,KAAK,cAAe,IAC7DH,SAAS,CAACG,IAAI,KAAK,OAAO,CAAC,CAAA;AAE/B,EAAA,IAAMC,qBAAqB,GAAG,MAAOJ,SAAoB,IAAK;IAC5D,IAAMK,kBAAkB,GAAGC,kBAAa,CAACN,SAAS,CAACG,IAAI,EAAEH,SAAS,EAAE;MAClE,GAAGA,SAAS,CAACC,OAAO;AACpBC,MAAAA,cAAc,EAAE,IAAA;AAClB,KAAC,CAAC,CAAA;AAEF,IAAA,IAAMK,UAAU,GAAG,MAAMb,MAAM,CAC7Bc,sBAAiB,CAACR,SAAS,CAACrC,KAAK,CAAC,EAClCqC,SAAS,CAACrC,KACZ,CAAC,CAAA;AACD,IAAA,IAAI4C,UAAU,EAAE;MACdF,kBAAkB,CAACI,UAAU,GAAG;QAC9B,GAAGJ,kBAAkB,CAACI,UAAU;AAChCC,QAAAA,cAAc,EAAE;AACdC,UAAAA,OAAO,EAAE,CAAC;AACVJ,UAAAA,UAAAA;AACF,SAAA;OACD,CAAA;AACD,MAAA,IACEF,kBAAkB,CAACF,IAAI,KAAK,OAAO,IACnCX,4BAA4B,EAC5B;AACAa,QAAAA,kBAAkB,CAACJ,OAAO,CAACW,eAAe,GACxCpB,4BAA4B,CAAA;AAChC,OAAA;AACF,KAAA;AAEA,IAAA,OAAOa,kBAAkB,CAAA;GAC1B,CAAA;AAED,EAAA,OAAOQ,WAAW,IAAI;AACpB,IAAA,IAAMC,OAAO,GAAGC,iBAAW,EAAa,CAAA;AAExC,IAAA,IAAMC,aAAa,GAEjBC,YAAM,CAACjB,SAAS,IAAI,CAACD,eAAe,CAACC,SAAS,CAAC,CAAC,CADhDa,WAAW,CAEZ,CAAA;AAED,IAAA,IAAMK,aAAa,GAGjBC,cAAQ,CAACnB,SAAS,IAAI;AACpB,MAAA,IAAMoB,mBAAmB,GAAGhB,qBAAqB,CAACJ,SAAS,CAAC,CAAA;AAC5D,MAAA,OAEEqB,eAAS,CAGLJ,YAAM,CAACK,EAAE,IAAIA,EAAE,CAACnB,IAAI,KAAK,UAAU,IAAImB,EAAE,CAACC,GAAG,KAAKvB,SAAS,CAACuB,GAAG,CAAC,CADhEV,WAAW,CAGf,CAAC,CANDW,iBAAW,CAACJ,mBAAmB,CAAC,CAAA,CAAA;KAQnC,CAAC,CAZFH,YAAM,CAAClB,eAAe,CAAC,CADvBc,WAAW,CAcZ,CAAA,CAAA;AAED,IAAA,OAqDEI,YAAM,CAAEQ,MAAM,IAAgC,CAAC,CAACA,MAAM,CAAC,CAlDvDC,SAAG,CAACD,MAAM,IAAI;AACZ,MAAA,IACE,CAAChC,uBAAuB,IACxBgC,MAAM,CAACzB,SAAS,CAACS,UAAU,IAC3BgB,MAAM,CAACzB,SAAS,CAACS,UAAU,CAACC,cAAc,EAC1C;QACA,IAAIe,MAAM,CAAC1C,KAAK,IAAIK,sBAAsB,CAACqC,MAAM,CAAC1C,KAAK,CAAC,EAAE;AACxD;AACAe,UAAAA,wBAAwB,GAAG,KAAK,CAAA;AAChC;AACA,UAAA,IAAM6B,iBAAiB,GAAGrB,kBAAa,CACrCmB,MAAM,CAACzB,SAAS,CAACG,IAAI,EACrBsB,MAAM,CAACzB,SACT,CAAC,CAAA;UACD,IAAI2B,iBAAiB,CAAClB,UAAU,EAC9B,OAAOkB,iBAAiB,CAAClB,UAAU,CAACC,cAAc,CAAA;AACpDI,UAAAA,OAAO,CAACc,IAAI,CAACD,iBAAiB,CAAC,CAAA;AAC/B,UAAA,OAAO,IAAI,CAAA;AACb,SAAC,MAAM,IAAIF,MAAM,CAAC1C,KAAK,IAAID,eAAe,CAAC2C,MAAM,CAAC1C,KAAK,CAAC,EAAE;UACxD,IAAI0C,MAAM,CAACzB,SAAS,CAACS,UAAU,CAACC,cAAc,CAACmB,IAAI,EAAE;AACnD,YAAA,IAAIpD,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;cACzCC,OAAO,CAACC,IAAI,CACV,4EAA4E,GAC1E,oGAAoG,GACpG,kJAAkJ,GAClJ,yGACJ,CAAC,CAAA;AACH,aAAA;AAEA,YAAA,OAAO4C,MAAM,CAAA;AACf,WAAA;AACA;AACA,UAAA,IAAME,kBAAiB,GAAGrB,kBAAa,CACrCmB,MAAM,CAACzB,SAAS,CAACG,IAAI,EACrBsB,MAAM,CAACzB,SACT,CAAC,CAAA;AACD;UACA2B,kBAAiB,CAAClB,UAAU,GAAG;YAC7B,GAAGkB,kBAAiB,CAAClB,UAAU;AAC/BC,YAAAA,cAAc,EAAE;cACd,GAAG,CAACiB,kBAAiB,CAAClB,UAAU,IAAI,EAAE,EAAEC,cAAc;AACtDmB,cAAAA,IAAI,EAAE,IAAA;AACR,aAAA;WACD,CAAA;AACDf,UAAAA,OAAO,CAACc,IAAI,CAACD,kBAAiB,CAAC,CAAA;AAC/B,UAAA,OAAO,IAAI,CAAA;AACb,SAAA;AACF,OAAA;AACA,MAAA,OAAOF,MAAM,CAAA;AACf,KAAC,CAAC,CAlDFlC,OAAO,CADPuC,WAAK,CAAC,CAACZ,aAAa,EAAEF,aAAa,EAAEF,OAAO,CAACiB,MAAM,CAAC,CAAC,CAAA,CAAA,CAAA,CAAA;GAsDxD,CAAA;AACH;;;;"}