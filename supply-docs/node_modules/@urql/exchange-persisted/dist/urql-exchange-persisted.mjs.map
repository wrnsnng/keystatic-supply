{"version":3,"file":"urql-exchange-persisted.mjs","sources":["../src/sha256.ts","../src/persistedExchange.ts"],"sourcesContent":null,"names":["webCrypto","window","crypto","self","nodeCrypto","hash","async","subtle","digest","name","TextEncoder","encode","query","Uint8Array","reduce","prev","byte","toString","padStart","Function","require","_error","getNodeCrypto","createHash","update","process","env","NODE_ENV","console","warn","persistedExchange","options","forward","preferGetForPersistedQueries","enforcePersistedQueries","hashFn","generateHash","enableForMutation","enableForSubscriptions","supportsPersistedQueries","operationFilter","operation","context","persistAttempt","kind","operations$","retries","makeSubject","forwardedOps$","filter","persistedOps$","mergeMap","persistedOperation$","persistedOperation","makeOperation","sha256Hash","stringifyDocument","extensions","persistedQuery","version","preferGetMethod","getPersistedOperation","takeUntil","op","key","fromPromise","result","map","error","graphQLErrors","some","x","message","followupOperation","next","isPersistedMiss","miss","merge","source"],"mappings":"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"}