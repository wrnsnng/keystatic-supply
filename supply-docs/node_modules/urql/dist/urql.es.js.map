{"version":3,"file":"urql.es.js","sources":["../src/context.ts","../src/hooks/state.ts","../src/hooks/useMutation.ts","../src/hooks/useRequest.ts","../src/hooks/cache.ts","../src/hooks/useQuery.ts","../src/hooks/useSubscription.ts","../src/components/Mutation.ts","../src/components/Query.ts","../src/components/Subscription.ts"],"sourcesContent":null,"names":["OBJ","Context","React","createContext","Provider","Consumer","displayName","useClient","client","useContext","process","env","NODE_ENV","error","console","Error","initialState","fetching","stale","hasNext","undefined","data","extensions","operation","areOperationsEqual","a","b","key","computeNextState","prevState","result","newState","isShallowDifferent","hasDepsChanged","i","l","length","reactSharedInternals","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","deferDispatch","setState","value","ReactCurrentOwner","current","Promise","resolve","then","useMutation","query","isMounted","useRef","state","useState","executeMutation","useCallback","variables","context","toPromise","take","filter","onPush","createRequest","useEffect","useRequest","prev","useMemo","request","getCacheForClient","_react","reclaim","Set","map","Map","operations$","subscribe","kind","has","delete","get","set","dispose","add","isSuspense","suspense","useQuery","args","cache","source","pause","executeQuery","requestPolicy","getSnapshot","subscription","_result","takeWhile","promise","_resolve","unsubscribe","deps","currentResult","hasResult","updateResult","nextResult","onEnd","opts","useSubscription","handler","handlerRef","executeSubscription","Mutation","props","mutation","children","Query","Subscription"],"mappings":"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"}